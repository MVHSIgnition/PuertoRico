<html>
	<head>
		<title>Login</title>
		<link rel="stylesheet" href="main.css">
	</head>
	<body>
		<h1>Login</h1>
		<center>
			<input class="inputBox" id="loginEmail" type="email" placeholder="Email"><br>
			<input class="inputBox" id="loginPassword" type="password" placeholder="Password"><br>
			<button class="mainButton" id="login">Login</button><br>
			<a href="prephome.html" id="loginBack"><button class="alternateButton">Back</button></a>
			<a href="register.html"><button class="alternateButton">Register</button></a>
		</center>

		<!--Firebase Registration Handling-->
		<script src = "information.js"></script>
		<script src="https://www.gstatic.com/firebasejs/4.8.0/firebase.js"></script>
		<script>
			var config = {
				apiKey: "AIzaSyDAiGrwP6o-yQK-Ug8vqykJQRgwfF6Zogk",
				authDomain: "puerto-rico-82a67.firebaseapp.com",
				databaseURL: "https://puerto-rico-82a67.firebaseio.com",
				projectId: "puerto-rico-82a67",
				storageBucket: "",
				messagingSenderId: "257818225257"
			};
			firebase.initializeApp(config);
		</script>
		
		<script>
			var d = new Date();
			var prepping = true;
			if(d.getTime()>=hurricanedate)prepping=false;
			if(!prepping) document.getElementById("loginBack").href="responsehome";
			var loginButton = document.getElementById("login");
			var lEmail = document.getElementById("loginEmail");
			var lPassword = document.getElementById("loginPassword");
			loginButton.onclick = function() {
				firebase.auth().signInWithEmailAndPassword(lEmail.value, lPassword.value).catch(function(error){
					var errorCode = error.code;
					var errorMessage = error.message;
					alert(errorMessage);
					//TODO: ADD ERROR PROCESSING
				});
			}
			firebase.auth().onAuthStateChanged(function(user) {
				if (user){
					if(prepping) window.location.replace("preptips.html");
					else window.location.replace("responsetips.html");
				}
			});	
		</script>
	</body>
</html>
